<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Pro Cycling Position Genius 2026</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: 'Hiragino Kaku Gothic ProN', sans-serif; background-color: #0d0d0d; color: #e0e0e0; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; background: #1a1a1a; padding: 30px; border-radius: 20px; border: 1px solid #333; box-shadow: 0 0 20px rgba(0,255,129,0.1); }
        h1 { text-align: center; color: #00df81; letter-spacing: 2px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px; }
        label { display: block; font-weight: bold; margin-bottom: 8px; font-size: 0.85rem; color: #aaa; }
        input, select { width: 100%; padding: 12px; background: #2a2a2a; border: 1px solid #444; border-radius: 8px; color: #fff; font-size: 1rem; }
        .result-box { background: linear-gradient(145deg, #222, #111); padding: 20px; border-radius: 15px; text-align: center; border: 1px solid #00df81; margin-bottom: 20px; }
        .result-val { font-size: 3rem; font-weight: bold; color: #00df81; text-shadow: 0 0 10px rgba(0,223,129,0.5); }
        .aori-box { min-height: 60px; background: #331111; border: 1px dashed #ff4d4d; padding: 15px; border-radius: 10px; color: #ff9999; font-style: italic; text-align: center; margin-bottom: 25px; display: flex; align-items: center; justify-content: center; font-weight: bold; }
        .chart-container { position: relative; height: 280px; width: 100%; }
        button { grid-column: span 2; padding: 15px; background: #00df81; color: #000; border: none; border-radius: 10px; font-size: 1.1rem; font-weight: bold; cursor: pointer; transition: 0.2s; }
        button:hover { background: #00ff94; transform: scale(1.02); }
        .footer-note { font-size: 0.75rem; color: #666; text-align: center; margin-top: 20px; }
    </style>
</head>
<body>

<div class="container">
    <h1>POSITION GENIUS <small style="font-size: 0.5em; color: #666;">v2026.1</small></h1>

    <div class="grid">
        <div>
            <label>身長 (cm)</label>
            <input type="number" id="height" value="177">
        </div>
        <div>
            <label>性別</label>
            <select id="gender">
                <option value="male">男 (股下46.0%)</option>
                <option value="female">女 (股下47.2%)</option>
            </select>
        </div>
        <div>
            <label>覚悟（カテゴリー）</label>
            <select id="category">
                <option value="pro">プロレベル </option>
                <option value="amateur" selected>アマチュア </option>
                <option value="brevet">ブルベライダー </option>
                <option value="weekend">月イチサイクリスト </option>
            </select>
        </div>
        <div>
            <label>クランク長 (mm)</label>
            <input type="number" id="crank" value="170" step="2.5">
        </div>
        <button onclick="updateAll()">解析を実行（現実に直面する）</button>
    </div>

    <div id="aoriText" class="aori-box">ここにお言葉が表示されます</div>

    <div class="result-box">
        <div style="font-size: 0.8rem; color: #888; margin-bottom: 5px;">推定される黄金のサドル高</div>
        <div id="result" class="result-val">-- cm</div>
    </div>

    <div class="chart-container">
        <canvas id="myChart"></canvas>
    </div>

    <p class="footer-note">※この数値は日本人平均比率に基づいた「煽り」混じりの理論値です。最終的には自分の膝と相談してください。</p>
</div>

<script>
let myChart;
const aoriMessages = [
    "カーボンを1g削る前に、昨日のラーメンを悔い改めろ。",
    "サドルの高さより、貯金残高の低さが気になりませんか？",
    "そのポジション、カフェまで持てば合格です。",
    "プロレベル設定？ 鏡を見てからもう一度選びなよ。",
    "結局、一番の軽量化は『お前の腹』だろ。",
    "機材はS-WORKS、脚力はママチャリ。それがお前だ。",
    "サドルを上げるだけで速くなれると思うなよ、小僧。",
    "膝が痛い？ それは神様が『休め』と言ってるんだよ。",
    "Di2の充電は忘れても、見栄を張ることは忘れないんだな。",
    "そのセットバック量、実力に見合ってない気がするが？",
    "ツール・ド・フランスに出る予定でもあるのか？",
    "1mmの調整にこだわる前に、引き足の練習しろよ。",
    "すね毛を剃る前に、まず削るべきタイムがあるだろ。",
    "エアロフレームにそのお腹。空気抵抗の塊（かたまり）だな。",
    "StravaのKOMより、近所の子供に抜かれない心配をしろよ。",
    "ズイフトの中では豪脚、外に出たらただの『坂嫌い』か？",
    "セラミックベアリングで浮いた数ワット、信号待ちでチャラだな。",
    "アウターローの異音、お前の膝の悲鳴よりうるさいぞ。",
    "FTPを自慢するな。その体重じゃ、ただの『重い人』だ。",
    "靴下の長さだけはプロ級だな。肝心の筋肉はどこへ消えた？",
    "集団についていけないのは、機材のせいじゃなくて才能のせいだ。",
    "そんなに盆栽バイクにしたいなら、床の間にでも飾っておけよ。",
    "ハイエンドタイヤを履いて、パンクが怖くて走れないのか？",
    "たった5%の坂で『激坂』って言うの、もうやめないか？",
    "30分のライドに補給食5個。お前のはサイクリングじゃなく遠足だ。",
    "ディープリムで風に煽られてふらつく姿、最高に滑稽（こっけい）だぞ。",
    "奥さんに内緒で買ったそのホイール、バレるのも時間の問題だな。",
    "そのビブショーツ、薄くなって透けてるぞ。誰も見たくないんだ。",
    "エアロヘルメット被ってその上体。逆風を全身でキャッチしてるな。",
    "パワーメーター見る暇あったら、前を見て事故らないよう気をつけろ。",
    "『今日はポタリングだから』という言い訳、聞き飽きたよ。",
    "止まってる姿だけは一流なんだがな。走り出した瞬間、すべてがバレる。"
];

function calculateSaddleHeight(h, gender, cat, crank) {
    const inseamRatio = (gender === 'male') ? 0.460 : 0.472;
    const inseam = h * inseamRatio;
    let baseSaddle = inseam * 0.883;
    const catAdjust = { 'pro': 0.5, 'amateur': 0, 'brevet': -0.8, 'weekend': -1.8 };
    baseSaddle += catAdjust[cat];
    const crankAdjust = (170 - crank) / 10;
    return baseSaddle + crankAdjust;
}

function updateAll() {
    const h = parseFloat(document.getElementById('height').value);
    const g = document.getElementById('gender').value;
    const c = document.getElementById('category').value;
    const crank = parseFloat(document.getElementById('crank').value);

    // 煽りメッセージを更新
    const randomAori = aoriMessages[Math.floor(Math.random() * aoriMessages.length)];
    const aoriBox = document.getElementById('aoriText');
    aoriBox.innerText = "【警告】" + randomAori;
    aoriBox.style.display = 'flex';

    // サドル高計算
    const result = calculateSaddleHeight(h, g, c, crank);
    document.getElementById('result').innerText = result.toFixed(1) + " cm";

    // グラフ更新
    const categories = ['pro', 'amateur', 'brevet', 'weekend'];
    const labels = ['プロ', 'アマ', 'ブルベ', '週末'];
    const dataPoints = categories.map(cat => calculateSaddleHeight(h, g, cat, crank));

    if (myChart) myChart.destroy();
    const ctx = document.getElementById('myChart').getContext('2d');
    myChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [{
                label: 'サドル高 (cm)',
                data: dataPoints,
                backgroundColor: labels.map((l, i) => categories[i] === c ? '#00df81' : '#333'),
                borderColor: '#00df81',
                borderWidth: 1,
                borderRadius: 5
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: { 
                    min: Math.floor(Math.min(...dataPoints) - 1), 
                    grid: { color: '#333' },
                    ticks: { color: '#888' }
                },
                x: { ticks: { color: '#888' } }
            },
            plugins: { legend: { display: false } }
        }
    });
}
// ページ読み込み時に一度実行
window.onload = updateAll;
</script>
</body>
</html>